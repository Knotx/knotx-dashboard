
task annotationProcessing(type: JavaCompile, group: 'build') { // codegen
    source = sourceSets.main.java
    classpath = configurations.compile + configurations.compileOnly
    destinationDir = project.file('src/main/generated')
    options.compilerArgs = [
        "-proc:only",
        "-processor", "io.vertx.codegen.CodeGenProcessor",
        "-Acodegen.output=${destinationDir.absolutePath}"
    ]
}

task annotationProcessingCleanup() {
    doLast {
        delete "${project.projectDir}/src/main/generated"
        println "Removing: ${project.projectDir}/src/main/generated"
    }
}

annotationProcessing.dependsOn annotationProcessingCleanup
